let popupCharrado = document.querySelector(".divQuantidadesCharrado")
let popupBiroBiro = document.querySelector(".divQuantidadesBiroBiro")
let popupGrod = document.querySelector(".divQuantidadesGrod")
let popupRoxane = document.querySelector(".divQuantidadesRoxane")
let popupPiroPiro = document.querySelector(".divQuantidadesPiroPiro")
let popupAzulety = document.querySelector(".divQuantidadesAzulety")

let popupForca = document.querySelector(".divQuantidadesForca")
let popupVel = document.querySelector(".divQuantidadesVel")
let popupAmor = document.querySelector(".divQuantidadesAmor")
let popupVoo = document.querySelector(".divQuantidadesVoo")
let popupResist = document.querySelector(".divQuantidadesResist")
let popupInvi = document.querySelector(".divQuantidadesInvi")

let popupAna = document.querySelector(".divQuantidadesAna")
let popupChucky = document.querySelector(".divQuantidadesChucky")
let popupUnicornio = document.querySelector(".divQuantidadesUnicornio")
let popupNuvem= document.querySelector(".divQuantidadesNuvem")
let popupMago = document.querySelector(".divQuantidadesMago")

let adicionarCarrinhoCharrado = document.querySelector(".carrinhoIconCharrado")
let adicionarCarrinhoBiroBiro = document.querySelector(".carrinhoIconBiroBiro")
let adicionarCarrinhoGrod = document.querySelector(".carrinhoIconGrod")
let adicionarCarrinhoRoxane = document.querySelector(".carrinhoIconRoxane")
let adicionarCarrinhoPiroPiro = document.querySelector(".carrinhoIconPiroPiro")
let adicionarCarrinhoAzulety = document.querySelector(".carrinhoIconAzulety")

let adicionarCarrinhoForca = document.querySelector(".carrinhoIconForca")
let adicionarCarrinhoVel = document.querySelector(".carrinhoIconVel")
let adicionarCarrinhoAmor = document.querySelector(".carrinhoIconAmor")
let adicionarCarrinhoVoo = document.querySelector(".carrinhoIconVoo")
let adicionarCarrinhoResist = document.querySelector(".carrinhoIconResist")
let adicionarCarrinhoInvi = document.querySelector(".carrinhoIconInvi")

let adicionarCarrinhoAna = document.querySelector(".carrinhoIconAna")
let adicionarCarrinhoChucky = document.querySelector(".carrinhoIconChucky")
let adicionarCarrinhoMago = document.querySelector(".carrinhoIconMago")
let adicionarCarrinhoUnicornio = document.querySelector(".carrinhoIconUnicornio")
let adicionarCarrinhoNuvem = document.querySelector(".carrinhoIconNuvem")

adicionarCarrinhoCharrado.addEventListener("click", () => {
    let stylePopupCharrado = window.getComputedStyle(popupCharrado);
    let displayPopupCharrado = stylePopupCharrado.getPropertyValue('display');

    if(displayPopupCharrado == "none"){
        popupCharrado.style.display = "flex";

    }else{
        popupCharrado.style.display = "none";

    }
});
adicionarCarrinhoBiroBiro.addEventListener("click", () => {
    let stylePopupBiroBiro = window.getComputedStyle(popupBiroBiro);
    let displayPopupBiroBiro = stylePopupBiroBiro.getPropertyValue('display');

    if(displayPopupBiroBiro == "none"){
        popupBiroBiro.style.display = "flex";

    }else{
        popupBiroBiro.style.display = "none";

    }
});
adicionarCarrinhoGrod.addEventListener("click", () => {
    let stylePopupGrod = window.getComputedStyle(popupGrod);
    let displayPopupGrod = stylePopupGrod.getPropertyValue('display');

    if(displayPopupGrod == "none"){
        popupGrod.style.display = "flex";

    }else{
        popupGrod.style.display = "none";

    }
});
adicionarCarrinhoRoxane.addEventListener("click", () => {
    let stylePopupRoxane = window.getComputedStyle(popupRoxane);
    let displayPopupRoxane = stylePopupRoxane.getPropertyValue('display');

    if(displayPopupRoxane == "none"){
        popupRoxane.style.display = "flex";

    }else{
        popupRoxane.style.display = "none";

    }
});
adicionarCarrinhoPiroPiro.addEventListener("click", () => {
    let stylePopupPiroPiro = window.getComputedStyle(popupPiroPiro);
    let displayPopupPiroPiro = stylePopupPiroPiro.getPropertyValue('display');

    if(displayPopupPiroPiro == "none"){
        popupPiroPiro.style.display = "flex";

    }else{
        popupPiroPiro.style.display = "none";

    }
});
adicionarCarrinhoAzulety.addEventListener("click", () => {
    let stylePopupAzulety = window.getComputedStyle(popupAzulety);
    let displayPopupAzulety = stylePopupAzulety.getPropertyValue('display');

    if(displayPopupAzulety == "none"){
        popupAzulety.style.display = "flex";

    }else{
        popupAzulety.style.display = "none";

    }
});
adicionarCarrinhoForca.addEventListener("click", () => {
    let stylePopupForca = window.getComputedStyle(popupForca);
    let displayPopupForca = stylePopupForca.getPropertyValue('display');

    if(displayPopupForca == "none"){
        popupForca.style.display = "flex";

    }else{
        popupForca.style.display = "none";

    }
});
adicionarCarrinhoAmor.addEventListener("click", () => {
    let stylePopupAmor = window.getComputedStyle(popupAmor);
    let displayPopupAmor = stylePopupAmor.getPropertyValue('display');

    if(displayPopupAmor == "none"){
        popupAmor.style.display = "flex";

    }else{
        popupAmor.style.display = "none";

    }
});
adicionarCarrinhoResist.addEventListener("click", () => {
    let stylePopupResist = window.getComputedStyle(popupResist);
    let displayPopupResist = stylePopupResist.getPropertyValue('display');

    if(displayPopupResist == "none"){
        popupResist.style.display = "flex";

    }else{
        popupResist.style.display = "none";

    }
});
adicionarCarrinhoVel.addEventListener("click", () => {
    let stylePopupVel = window.getComputedStyle(popupVel);
    let displayPopupVel = stylePopupVel.getPropertyValue('display');

    if(displayPopupVel == "none"){
        popupVel.style.display = "flex";

    }else{
        popupVel.style.display = "none";

    }
});
adicionarCarrinhoVoo.addEventListener("click", () => {
    let stylePopupVoo = window.getComputedStyle(popupVoo);
    let displayPopupVoo = stylePopupVoo.getPropertyValue('display');

    if(displayPopupVoo == "none"){
        popupVoo.style.display = "flex";

    }else{
        popupVoo.style.display = "none";

    }
});
adicionarCarrinhoInvi.addEventListener("click", () => {
    let stylePopupInvi = window.getComputedStyle(popupInvi);
    let displayPopupInvi = stylePopupInvi.getPropertyValue('display');

    if(displayPopupInvi == "none"){
        popupInvi.style.display = "flex";

    }else{
        popupInvi.style.display = "none";

    }
});
adicionarCarrinhoAna.addEventListener("click", () => {
    let stylePopupAna = window.getComputedStyle(popupAna);
    let displayPopupAna = stylePopupAna.getPropertyValue('display');

    if(displayPopupAna == "none"){
        popupAna.style.display = "flex";

    }else{
        popupAna.style.display = "none";

    }
});
adicionarCarrinhoChucky.addEventListener("click", () => {
    let stylePopupChucky = window.getComputedStyle(popupChucky);
    let displayPopupChucky = stylePopupChucky.getPropertyValue('display');

    if(displayPopupChucky == "none"){
        popupChucky.style.display = "flex";

    }else{
        popupChucky.style.display = "none";

    }
});
adicionarCarrinhoUnicornio.addEventListener("click", () => {
    let stylePopupUnicornio = window.getComputedStyle(popupUnicornio);
    let displayPopupUnicornio = stylePopupUnicornio.getPropertyValue('display');

    if(displayPopupUnicornio == "none"){
        popupUnicornio.style.display = "flex";

    }else{
        popupUnicornio.style.display = "none";

    }
});
adicionarCarrinhoNuvem.addEventListener("click", () => {
    let stylePopupNuvem = window.getComputedStyle(popupNuvem);
    let displayPopupNuvem = stylePopupNuvem.getPropertyValue('display');

    if(displayPopupNuvem == "none"){
        popupNuvem.style.display = "flex";

    }else{
        popupNuvem.style.display = "none";

    }
});
adicionarCarrinhoMago.addEventListener("click", () => {
    let stylePopupMago = window.getComputedStyle(popupMago);
    let displayPopupMago = stylePopupMago.getPropertyValue('display');

    if(displayPopupMago == "none"){
        popupMago.style.display = "flex";

    }else{
        popupMago.style.display = "none";

    }
});

function enviarCarrinho() {
    let inputQuantidadeNumeroCharrado = document.querySelector("#charrado").value
    alert(inputQuantidadeNumeroCharrado);
    localStorage.setItem(
        'beijoCharrado', inputQuantidadeNumeroCharrado
    )
    let stylePopupCharrado = window.getComputedStyle(popupCharrado);
    let displayPopupCharrado = stylePopupCharrado.getPropertyValue('display');

    if(displayPopupCharrado == "flex"){
        popupCharrado.style.display = "none";

    }else{
        popupCharrado.style.display = "flex";

    }

    

}
function enviarCarrinhoBiroBiro() {
    let inputQuantidadeNumeroBiroBiro = document.querySelector("#BiroBiro").value
    alert(inputQuantidadeNumeroBiroBiro);
    localStorage.setItem(
        'beijoBiroBiro', inputQuantidadeNumeroBiroBiro
    )
    let stylePopupBiroBiro = window.getComputedStyle(popupBiroBiro);
    let displayPopupBiroBiro = stylePopupBiroBiro.getPropertyValue('display');

    if(displayPopupBiroBiro == "flex"){
        popupBiroBiro.style.display = "none";

    }else{
        popupBiroBiro.style.display = "flex";

    }

    

}
function enviarCarrinhoGrod() {
    let inputQuantidadeNumeroGrod = document.querySelector("#Grod").value
    alert(inputQuantidadeNumeroGrod);
    localStorage.setItem(
        'beijoGrod', inputQuantidadeNumeroGrod
    )
    let stylePopupGrod = window.getComputedStyle(popupGrod);
    let displayPopupGrod = stylePopupGrod.getPropertyValue('display');

    if(displayPopupGrod == "flex"){
        popupGrod.style.display = "none";

    }else{
        popupGrod.style.display = "flex";

    }

    

}
function enviarCarrinhoRoxane() {
    let inputQuantidadeNumeroRoxane = document.querySelector("#Roxane").value
    alert(inputQuantidadeNumeroRoxane);
    localStorage.setItem(
        'beijoRoxane', inputQuantidadeNumeroRoxane
    )
    let stylePopupRoxane = window.getComputedStyle(popupRoxane);
    let displayPopupRoxane = stylePopupRoxane.getPropertyValue('display');

    if(displayPopupRoxane == "flex"){
        popupRoxane.style.display = "none";

    }else{
        popupRoxane.style.display = "flex";

    }

    

}
function enviarCarrinhoAzulety() {
    let inputQuantidadeNumeroAzulety = document.querySelector("#Azulety").value
    alert(inputQuantidadeNumeroAzulety);
    localStorage.setItem(
        'beijoAzulety', inputQuantidadeNumeroAzulety
    )
    let stylePopupAzulety = window.getComputedStyle(popupAzulety);
    let displayPopupAzulety = stylePopupAzulety.getPropertyValue('display');

    if(displayPopupAzulety == "flex"){
        popupAzulety.style.display = "none";

    }else{
        popupAzulety.style.display = "flex";

    }

}
function enviarCarrinhoForca() {
    let inputQuantidadeNumeroForca = document.querySelector("#Forca").value
    alert(inputQuantidadeNumeroForca);
    localStorage.setItem(
        'PocaoForca', inputQuantidadeNumeroForca
    )
    let stylePopupForca = window.getComputedStyle(popupForca);
    let displayPopupForca = stylePopupForca.getPropertyValue('display');

    if(displayPopupForca == "flex"){
        popupForca.style.display = "none";

    }else{
        popupForca.style.display = "flex";

    }

}
function enviarCarrinhoAmor() {
    let inputQuantidadeNumeroAmor = document.querySelector("#Amor").value
    alert(inputQuantidadeNumeroAmor);
    localStorage.setItem(
        'PocaoAmor', inputQuantidadeNumeroAmor
    )
    let stylePopupAmor = window.getComputedStyle(popupAmor);
    let displayPopupAmor = stylePopupAmor.getPropertyValue('display');

    if(displayPopupAmor == "flex"){
        popupAmor.style.display = "none";

    }else{
        popupAmor.style.display = "flex";

    }

}
function enviarCarrinhoInvi() {
    let inputQuantidadeNumeroInvi = document.querySelector("#Invi").value
    alert(inputQuantidadeNumeroInvi);
    localStorage.setItem(
        'PocaoInvi', inputQuantidadeNumeroInvi
    )
    let stylePopupInvi = window.getComputedStyle(popupInvi);
    let displayPopupInvi = stylePopupInvi.getPropertyValue('display');

    if(displayPopupInvi == "flex"){
        popupInvi.style.display = "none";

    }else{
        popupInvi.style.display = "flex";

    }

}
function enviarCarrinhoResist() {
    let inputQuantidadeNumeroResist = document.querySelector("#Resist").value
    alert(inputQuantidadeNumeroResist);
    localStorage.setItem(
        'PocaoResist', inputQuantidadeNumeroResist
    )
    let stylePopupResist = window.getComputedStyle(popupResist);
    let displayPopupResist = stylePopupResist.getPropertyValue('display');

    if(displayPopupResist == "flex"){
        popupResist.style.display = "none";

    }else{
        popupResist.style.display = "flex";

    }

}
function enviarCarrinhoVoo() {
    let inputQuantidadeNumeroVoo = document.querySelector("#Voo").value
    alert(inputQuantidadeNumeroVoo);
    localStorage.setItem(
        'PocaoVoo', inputQuantidadeNumeroVoo
    )
    let stylePopupVo = window.getComputedStyle(popupVo);
    let displayPopupVo = stylePopupVo.getPropertyValue('display');

    if(displayPopupVo == "flex"){
        popupVoo.style.display = "none";

    }else{
        popupVo.style.display = "flex";

    }

}
function enviarCarrinhoVel() {
    let inputQuantidadeNumeroVel = document.querySelector("#Vel").value
    alert(inputQuantidadeNumeroVel);
    localStorage.setItem(
        'PocaoVel', inputQuantidadeNumeroVel
    )
    let stylePopupVel = window.getComputedStyle(popupVel);
    let displayPopupVel = stylePopupVel.getPropertyValue('display');

    if(displayPopupVel == "flex"){
        popupVel.style.display = "none";

    }else{
        popupVel.style.display = "flex";

    }

}
function enviarCarrinhoAna() {
    let inputQuantidadeNumeroAna = document.querySelector("#Ana").value
    alert(inputQuantidadeNumeroAna);
    localStorage.setItem(
        'Ana', inputQuantidadeNumeroAna
    )
    let stylePopupAna = window.getComputedStyle(popupAna);
    let displayPopupAna = stylePopupAna.getPropertyValue('display');

    if(displayPopupAna == "flex"){
        popupAna.style.display = "none";

    }else{
        popupAna.style.display = "flex";

    }

}
function enviarCarrinhoChucky() {
    let inputQuantidadeNumeroChucky = document.querySelector("#Chucky").value
    alert(inputQuantidadeNumeroChucky);
    localStorage.setItem(
        'Chucky', inputQuantidadeNumeroChucky
    )
    let stylePopupChucky = window.getComputedStyle(popupChucky);
    let displayPopupChucky = stylePopupChucky.getPropertyValue('display');

    if(displayPopupChucky == "flex"){
        popupChucky.style.display = "none";

    }else{
        popupChucky.style.display = "flex";

    }

}
function enviarCarrinhoUnicornio() {
    let inputQuantidadeNumeroUnicornio = document.querySelector("#Unicornio").value
    alert(inputQuantidadeNumeroUnicornio);
    localStorage.setItem(
        'Unicornio', inputQuantidadeNumeroUnicornio
    )
    let stylePopupUnicornio = window.getComputedStyle(popupUnicornio);
    let displayPopupUnicornio = stylePopupUnicornio.getPropertyValue('display');

    if(displayPopupUnicornio == "flex"){
        popupUnicornio.style.display = "none";

    }else{
        popupUnicornio.style.display = "flex";

    }

}
function enviarCarrinhoNuvem() {
    let inputQuantidadeNumeroNuvem = document.querySelector("#Nuvem").value
    alert(inputQuantidadeNumeroNuvem);
    localStorage.setItem(
        'Nuvem', inputQuantidadeNumeroNuvem
    )
    let stylePopupNuvem = window.getComputedStyle(popupNuvem);
    let displayPopupNuvem = stylePopupNuvem.getPropertyValue('display');

    if(displayPopupNuvem == "flex"){
        popupNuvem.style.display = "none";

    }else{
        popupNuvem.style.display = "flex";

    }

}
function enviarCarrinhoMago() {
    let inputQuantidadeNumeroMago = document.querySelector("#Mago").value
    alert(inputQuantidadeNumeroMago);
    localStorage.setItem(
        'Mago', inputQuantidadeNumeroMago
    )
    let stylePopupMago = window.getComputedStyle(popupMago);
    let displayPopupMago = stylePopupMago.getPropertyValue('display');

    if(displayPopupMago == "flex"){
        popupMago.style.display = "none";

    }else{
        popupMago.style.display = "flex";

    }

}
function sair(event) {
    localStorage.removeItem('informacoes','PocaoAmor', 'PocaoForca', 'PocaoInvi', 'PocaoResist', 'PocaoVel', 'PocaoVoo','beijoAzulety', 'beijoBiroBiro', 'beijoCharrado', 'beijoGrod', 'beijoRoxane', 'beijoPiroPiro')
    window.location.href = "../login/login.html"
}



document.addEventListener("DOMContentLoaded", () => {
    listarProdutosUsuario()
});


async function listarProdutosUsuario() {
    const response = await fetch('http://localhost:3002/produtos/listar', {
        method: "GET",
        headers: {
            "Content-Type": "application/json"
        }
    });
    const results = await response.json();

    if (results.success) {
        let productData = results.data;
        const images = 'http://localhost:3002/uploads/';
        let html = document.getElementById('main');

        if (html) { // Verifica se o elemento existe
            console.log(productData);

            productData.forEach(product => {
                let card = `
                <div class="bordaProdutos">
                        <div class="divProdutos">
                            <button class="botaoImagem">
                                <a href="../paginaDeUmProduto/Charrado.html">
                                    <img class="produtosImagem" src="${images + product.imagemProduto}" alt="">
                                </a>
                            </button>
                        <button class="botaoCarrinho" onclick='editarProduto(${JSON.stringify(product)})'><img class="carrinhoIconVoo" src="../Imagens/carrinhoDeCompras.png" alt="carrinho de compras"></button>
                    </div>
                <p class="nomeProduto">${product.nomeProduto}<strong class="preco">R$${product.precoProdutos}</strong></p>
            </div>
            
                `;
                html.innerHTML += card;
            });
        } else {
            console.error('Elemento com ID "main" não encontrado.');
        }
    } else {
        alert(results.message);
    }
}
